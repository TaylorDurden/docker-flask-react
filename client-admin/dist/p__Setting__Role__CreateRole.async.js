(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[36],{SSlr:function(e,a){function n(e){if(null==e)throw new TypeError("Cannot destructure undefined")}e.exports=n},yiMh:function(e,a,n){"use strict";n.r(a);n("U3G+");var t,l,r,s,o=n("Q2qM"),c=n("U1Sa"),i=n.n(c),m=(n("+iD4"),n("uDpN")),d=(n("u0Ms"),n("mE2p")),p=(n("cgt6"),n("aRya")),u=(n("/9XJ"),n("itzS")),h=n("SSlr"),f=n.n(h),g=n("smUt"),k=n.n(g),y=(n("EMia"),n("ujxS")),E=n("Pjwa"),v=n.n(E),C=n("2cji"),b=n.n(C),w=n("sp3j"),P=n.n(w),S=n("vZkh"),j=n.n(S),D=n("+KCP"),M=n.n(D),x=(n("UZy/"),n("q+O/")),A=(n("gYqB"),n("ybht")),B=(n("4B7h"),n("UFLp")),q=(n("o6y/"),n("t2Zo")),F=n("uqIC"),U=n.n(F),L=n("LneV"),Z=(n("a/LZ"),n("df/D"),n("NdDt"),n("kjjE")),J=n("Pt3h"),N=(n("CkN6"),n("zHco")),T=(q["a"].RangePicker,B["a"].Item),z=A["a"].Panel,G=x["a"].Group,I=(t=Object(L["connect"])(function(e){var a=e.roles,n=e.loading;return{roles:a,loading:n.models.roles}}),l=B["a"].create(),t(r=l((s=function(e){function a(){var e,n;v()(this,a);for(var t=arguments.length,l=new Array(t),r=0;r<t;r++)l[r]=arguments[r];return n=P()(this,(e=j()(a)).call.apply(e,[this].concat(l))),n.state={formValues:{},indeterminate:!0,checkAll:!1},n.handleBackClick=function(){Z["a"].push("/setting-center/role-index")},n.handleAdd=function(e){var a=n.props.dispatch;a({type:"roles/add",payload:{desc:e.desc}}),y["a"].success("\u6dfb\u52a0\u6210\u529f"),n.handleBackClick()},n.handleSubmit=function(e){var a=n.props,t=a.dispatch,l=a.form,r=a.roles.selectedPermissions;e.preventDefault(),l.validateFieldsAndScroll(function(e,a){e||(t({type:"roles/add",payload:{name:a.name,desc:a.desc,permissions:r}}),y["a"].success("\u6dfb\u52a0\u6210\u529f"),n.handleBackClick())})},n.onChange=function(e,a,t){var l=n.props,r=l.dispatch,s=l.roles.selectedPermissions,o={};t.length>0?o[e]=t:delete s[e];var c=k()({},s,o);r({type:"roles/changePermission",payload:c})},n.onCheckAllChange=function(e,a,t){var l=n.props,r=l.dispatch,s=l.roles.selectedPermissions,o=a.map(function(e){return e.value}),c={};t.target.checked?c[e]=o:delete s[e];var i=k()({},s,c);r({type:"roles/changePermission",payload:i})},n}return M()(a,e),b()(a,[{key:"componentDidMount",value:function(){var e=this.props.dispatch;e({type:"roles/template"})}},{key:"callback",value:function(e){console.log(e)}},{key:"render",value:function(){var e=this,a=this.props,n=a.roles,t=n.data,l=n.selectedPermissions,r=a.loading,s=a.form;console.log(t),f()(this.state);var c=s.getFieldDecorator,h={labelCol:{xs:{span:4},sm:{span:2}},wrapperCol:{xs:{span:18},sm:{span:20}}},g={wrapperCol:{xs:{span:24,offset:4},sm:{span:10,offset:2}}},k=t.items||[];return U.a.createElement(N["a"],null,U.a.createElement(o["a"],{bordered:!1},U.a.createElement(B["a"],i()({},h,{onSubmit:this.handleSubmit}),U.a.createElement(p["a"],null,U.a.createElement(T,{label:"\u89d2\u8272\u540d\u79f0"},c("name",{rules:[{required:!0,message:"\u8bf7\u586b\u5199\u89d2\u8272\u540d\u79f0!"}]})(U.a.createElement(u["a"],null)))),U.a.createElement(p["a"],null,U.a.createElement(T,{label:"\u89d2\u8272\u63cf\u8ff0"},c("desc",{rules:[]})(U.a.createElement(u["a"],null)))),U.a.createElement(p["a"],null,U.a.createElement(T,{label:"\u89d2\u8272\u6743\u9650"},k.map(function(a,n){return U.a.createElement(A["a"],{onChange:e.callback,key:a.name},U.a.createElement(z,{header:a.name,key:a.name},a.module_permissions.map(function(a,n){return U.a.createElement(p["a"],{key:a.module},U.a.createElement(d["a"],{span:8},U.a.createElement(x["a"],{onChange:e.onCheckAllChange.bind(e,a.module,a.permissions)},a.module_name)),U.a.createElement(d["a"],{span:16},U.a.createElement(G,{options:a.permissions,value:l[a.module],onChange:e.onChange.bind(e,a.module,a.permissions)})))})))}))),U.a.createElement(p["a"],null,U.a.createElement(T,i()({},g,{style:{marginTop:32}}),U.a.createElement(m["a"],{type:"primary",htmlType:"submit",loading:r},U.a.createElement(J["FormattedMessage"],{id:"form.save"})),U.a.createElement(m["a"],{style:{marginLeft:8},onClick:this.handleBackClick},U.a.createElement(J["FormattedMessage"],{id:"form.back"})))))))}}]),a}(F["PureComponent"]),r=s))||r)||r);a["default"]=I}}]);